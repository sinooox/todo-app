
# Документация API

Данный API предоставляет функционал для регистрации пользователей, авторизации и работы с заметками. Ниже приведено описание всех доступных конечных точек (endpoints) и вариантов взаимодействия.

---

## Содержание

- [Обзор](#обзор)
- [Установка и запуск](#установка-и-запуск)
- [Конечные точки](#конечные-точки)
  - [Регистрация пользователя](#регистрация-пользователя)
  - [Авторизация](#авторизация)
  - [Работа с заметками](#работа-с-заметками)
    - [Получение списка заметок](#получение-списка-заметок)
    - [Создание заметки](#создание-заметки)
    - [Удаление заметки](#удаление-заметки)
- [Аутентификация](#аутентификация)

---

## Обзор

API реализовано с использованием Flask и Flask-RESTful. Взаимодействие с базой данных происходит через PostgreSQL. Все маршруты, связанные с заметками, требуют базовой HTTP-аутентификации (Basic Auth).

---

## Установка и запуск

1. **Клонируйте репозиторий** и перейдите в каталог проекта.
2. **Установите зависимости**:
   ```bash
   pip install flask flask-restful psycopg2-binary werkzeug
   ```
3. **Настройте параметры подключения к базе данных**. Параметры задаются в файле `DB_CONFIG.py`:
   ```python
   DB = {
       'dbname': 'your_db_name',
       'user': 'your_db_user',
       'password': 'your_db_password',
       'host': 'your_db_host',
       'port': 'your_db_port'
   }
   ```
4. **Запустите сервер**:
   ```bash
   python3 main.py
   ```
   По умолчанию сервер стартует по адресу `http://172.17.8.181:5000`.

---

## Конечные точки

### Регистрация пользователя

- **URL:** `/register`
- **Метод:** `POST`
- **Описание:** Регистрирует нового пользователя.
- **Тело запроса (JSON):**
  ```json
  {
    "login": "имя_пользователя",
    "password": "пароль"
  }
  ```
- **Ответ:**
  - `200 OK` – Пользователь успешно зарегистрирован.
  - `400 Bad Request` – Пользователь с таким логином уже существует.

---

### Авторизация

- **URL:** `/login`
- **Метод:** `POST`
- **Описание:** Выполняет авторизацию пользователя.
- **Тело запроса (JSON):**
  ```json
  {
    "login": "имя_пользователя",
    "password": "пароль"
  }
  ```
- **Ответ:**
  - `200 OK` – Авторизация успешна, возвращается `user_id`.
  - `401 Unauthorized` – Неверный логин или пароль.

---

### Работа с заметками

Все запросы к конечным точкам, связанным с заметками, требуют наличия заголовка **Authorization** с базовой HTTP-аутентификацией.

#### Получение списка заметок

- **URL:** `/notes`
- **Метод:** `GET`
- **Описание:** Возвращает список заметок для аутентифицированного пользователя.
- **Ответ:**
  - `200 OK` – Массив заметок в формате:
    ```json
      {
        "id": 1,
        "note": "Текст заметки"
      }
    ```
  - `401 Unauthorized` – Отсутствует или неверный заголовок авторизации.

#### Создание заметки

- **URL:** `/notes`
- **Метод:** `POST`
- **Описание:** Создает новую заметку для аутентифицированного пользователя.
- **Тело запроса (JSON):**
  ```json
  {
    "note": "Текст новой заметки"
  }
  ```
- **Ответ:**
  - `201 Created` – Заметка успешно создана.
  - `401 Unauthorized` – Отсутствует или неверный заголовок авторизации.

#### Удаление заметки

- **URL:** `/notes/<note_id>`
- **Метод:** `DELETE`
- **Описание:** Удаляет заметку с указанным `note_id` у аутентифицированного пользователя.
- **Параметры URL:**
  - `note_id` – Идентификатор заметки, которую необходимо удалить.
- **Ответ:**
  - `200 OK` – Заметка успешно удалена.
  - `404 Not Found` – Заметка не найдена или не принадлежит пользователю.
  - `401 Unauthorized` – Отсутствует или неверный заголовок авторизации.

---

## Аутентификация

Для доступа к конечным точкам, связанным с заметками, необходимо использовать базовую HTTP-аутентификацию (Basic Auth). Заголовок запроса должен иметь следующий формат:

```
Authorization: Basic <credentials>
```

Где `<credentials>` – это строка, полученная путем кодирования в Base64 строки вида `username:password`.

Если аутентификация не пройдена, сервер вернет соответствующее сообщение об ошибке с кодом `401 Unauthorized`.
